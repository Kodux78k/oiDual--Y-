:root {
  --bg-deep: #030406;
  --bg-gradient: linear-gradient(180deg,#000,#111);
  --bg: var(--bg-gradient);
  --text: #d7d7d7;
  --neon-cyan: #00f2ff;
  --neon-purple: #bd00ff;
  --neon-gold: #ffd700;
  --neon-danger: #ff2a6d;
  --neon-success: #00ff9d;
  --font-ui: 'Montserrat', sans-serif;
  --font-code: 'JetBrains Mono', monospace;
  --glass-surface: rgba(18,18,22,0.65);
  --glass-border: rgba(255,255,255,0.06);
  --ease-overshoot: cubic-bezier(0.34, 1.3, 0.64, 1);
  --ease-smooth: cubic-bezier(0.23, 1, 0.32, 1);
}
/* BASE */
* {
  box-sizing:border-box;
  -webkit-tap-highlight-color:transparent;
  outline:none;
  user-select:none
}
body {
  height:100vh;
  margin:0;
  overflow:auto;
  font-family:var(--font-ui);
  background:var(--bg);
  color:var(--text);
}
.cyber-input, input, textarea {
  user-select:text !important;
  -webkit-user-select:text !important;
}
/* AMBIENT */
.ambient-light {
  position:fixed;
  inset:0;
  z-index:0;
  pointer-events:none
}
.blob {
  position:absolute;
  border-radius:50%;
  filter:blur(100px);
  opacity:0.14;
  animation:float 25s infinite alternate ease-in-out
}
.blob-1 {
  width:60vw;
  height:60vw;
  background:var(--neon-cyan);
  top:-20%;
  left:-20%
}
.blob-2 {
  width:50vw;
  height:50vw;
  background:var(--neon-purple);
  bottom:-20%;
  right:-20%;
  animation-delay:-5s
}
@keyframes float {
  0% {
  transform:translate(0,0)
}
100% {
  transform:translate(40px,60px)
}
}
@keyframes gradientFlow {
  0% {
  background-position:0% 50%
}
50% {
  background-position:100% 50%
}
100% {
  background-position:0% 50%
}
}
/* SNAP ZONE */
#snap-zone {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 80px;
  background: linear-gradient(to bottom, rgba(0, 242, 255, 0.25), transparent);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
  z-index:9000;
  box-shadow: 0 0 40px rgba(0, 242, 255, 0.1);
}
#snap-zone.active {
  opacity:1
}
/* FUSION CARD CONTAINER */
.container {
  position:absolute;
  inset:0;
  pointer-events:none;
  display:flex;
  align-items:center;
  justify-content:center;
  perspective:1200px;
  z-index:10
}
/* FUSION CARD STYLES */
.fusion-card {
  pointer-events:auto;
  width:100%;
  max-width:440px;
  max-height:78vh;
  overflow-y:auto;
  overflow-x:hidden;
  background:var(--glass-surface);
  backdrop-filter:blur(30px);
  -webkit-backdrop-filter:blur(30px);
  border:1px solid var(--glass-border);
  border-radius:36px;
  padding:30px 25px;
  box-shadow:0 40px 100px rgba(0,0,0,0.8);
  position:relative;
  opacity:0;
  transform:translateY(50px) scale(0.96);
  display:flex;
  flex-direction:column;
  gap:8px;
  /* Mantendo transições exatas do original para a física funcionar */
  transition: width 0.5s var(--ease-smooth), height 0.5s var(--ease-smooth), border-radius 0.5s var(--ease-smooth), opacity 0.4s, left 0.4s var(--ease-smooth), top 0.4s var(--ease-smooth), box-shadow 0.4s;
  will-change: transform, width, height, border-radius, left, top;
  touch-action: none;
  /* Importante para o Drag */
}
.fusion-card::-webkit-scrollbar {
  display:none
}
.fusion-card.active {
  opacity:1;
  transform:translateY(0) scale(1)
}
.fusion-card.closed {
  width:260px;
  padding:14px 16px;
  border-radius:22px
}
.fusion-card.closed .card-body {
  display:none
}
/* ORB MODE */
.fusion-card.orb {
  position:fixed !important;
  width:68px !important;
  height:68px !important;
  padding:0 !important;
  border-radius:50% !important;
  align-items:center;
  justify-content:center;
  box-shadow:0 15px 40px rgba(0,0,0,0.6), 0 0 20px rgba(0,242,255,0.2);
  z-index:9999;
  cursor:grab;
  overflow:visible;
}
.fusion-card.orb:active {
  cursor:grabbing;
  transform:scale(0.95)
}
.fusion-card.orb .text-block, .fusion-card.orb .clock-widget, .fusion-card.orb .card-body, .fusion-card.orb .small-preview {
  display:none !important
}
.fusion-card.orb .card-header {
  margin:0;
  width:100%;
  height:100%;
  justify-content:center;
  padding:0
}
.fusion-card.orb .avatar-slot {
  width:54px;
  height:54px;
  border-radius:50%;
  margin:0;
  opacity:1;
  pointer-events:none
}
.orb-menu-trigger {
  position:absolute;
  bottom:-30px;
  left:50%;
  transform:translateX(-50%);
  width:24px;
  height:24px;
  background:rgba(0,0,0,0.5);
  border:1px solid rgba(255,255,255,0.2);
  border-radius:50%;
  display:none;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  color:#fff;
  font-size:12px;
  pointer-events:auto;
  backdrop-filter:blur(4px);
}
.fusion-card.orb:hover .orb-menu-trigger {
  display:flex
}
/* HUD MODE */
.fusion-card.hud {
  position:fixed !important;
  top:0 !important;
  left:50% !important;
  transform:translateX(-50%) !important;
  width:96% !important;
  max-width:600px !important;
  height:64px !important;
  padding:0 16px !important;
  border-radius:0 0 24px 24px !important;
  flex-direction:row;
  align-items:center;
  justify-content:space-between;
  box-shadow:0 10px 40px rgba(0,0,0,0.7);
  z-index:9999;
  overflow:visible;
  border-top:none;
  opacity:0.78;
  touch-action:none;
}
.fusion-card.hud .card-body, .fusion-card.hud .small-preview {
  display:none !important
}
.fusion-card.hud .card-header {
  margin:0;
  width:100%;
  justify-content:space-between
}
.fusion-card.hud .avatar-slot {
  width:40px;
  height:40px
}
.fusion-card.hud .brand-dual {
  font-size:1.2rem;
  margin:0
}
.fusion-card.hud .greeting-row {
  display:none
}
.fusion-card.hud .text-block {
  flex:unset
}
.drag-handle {
  width:60px;
  height:5px;
  background:rgba(255,255,255,0.15);
  border-radius:10px;
  position:absolute;
  bottom:8px;
  left:50%;
  transform:translateX(-50%);
  display:none;
  cursor:grab;
  pointer-events:none;
  transition:background 0.3s;
}
.fusion-card.hud:active .drag-handle {
  background:var(--neon-cyan);
  width:70px
}
.fusion-card.hud .drag-handle {
  display:block
}
.hud-menu-btn {
  display:none;
  background:transparent;
  border:none;
  color:rgba(255,255,255,0.6);
  cursor:pointer
}
.fusion-card.hud .hud-menu-btn {
  display:block
}
/* HEADER & ELEMENTS */
.card-header {
  display:flex;
  align-items:center;
  gap:15px;
  margin-bottom:18px;
  width:100%;
  cursor:pointer;
  touch-action:none
}
.avatar-slot {
  width:64px;
  height:64px;
  border-radius:18px;
  overflow:hidden;
  opacity:0;
  transition:opacity 0.35s
}
.avatar-slot.shown {
  opacity:1
}
.text-block {
  flex:1;
  display:flex;
  flex-direction:column;
  justify-content:center
}
.greeting-row {
  font-size:1.5rem;
  line-height:1;
  display:flex;
  align-items:baseline;
  gap:6px;
  flex-wrap:wrap
}
.txt-thin {
  font-weight:200;
  color:rgba(255,255,255,0.7)
}
.txt-heavy {
  font-weight:600;
  color:#fff
}
.brand-dual {
  font-size:2.2rem;
  font-weight:900;
  line-height:0.95;
  text-transform:uppercase;
  letter-spacing:-2px;
  margin-top:4px;
  background:linear-gradient(-45deg,#fff,var(--neon-cyan),var(--neon-purple),#fff);
  background-size:300%;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:gradientFlow 4s ease infinite;
}
.clock-widget {
  text-align:right
}
.time-display {
  font-family:var(--font-code);
  font-size:1rem;
  color:rgba(255,255,255,0.5);
  font-weight:700
}
.status-led {
  font-size:0.6rem;
  color:var(--neon-cyan);
  text-transform:uppercase;
  letter-spacing:1px;
  margin-top:4px;
  display:block
}
/* SMALL PREVIEW */
.small-preview {
  display:none;
  align-items:center;
  gap:10px;
  margin-top:8px;
  padding:8px 10px;
  border-radius:10px;
  background:rgba(255,255,255,0.02);
  border:1px solid rgba(255,255,255,0.03);
  font-family:var(--font-code);
  font-size:0.86rem;
  color:rgba(255,255,255,0.9);
  cursor:pointer
}
.small-preview .mini-avatar {
  width:30px;
  height:30px;
  border-radius:6px;
  flex-shrink:0;
  overflow:hidden;
  display:inline-flex;
  align-items:center;
  justify-content:center
}
.small-preview .small-text {
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  max-width:calc(100% - 110px)
}
.small-preview .ident-badge {
  margin-left:auto;
  font-weight:700;
  font-size:0.78rem;
  padding:4px 8px;
  border-radius:999px;
  background:rgba(255,255,255,0.03);
  color:rgba(255,255,255,0.9);
  border:1px solid rgba(255,255,255,0.02)
}
.fusion-card.closed:not(.orb):not(.hud) .small-preview {
  display:flex
}
/* CARD BODY */
.card-body {
  display:flex;
  flex-direction:column;
  gap:12px
}
.stagger-item {
  opacity:0;
  transform:translateY(15px);
  transition:opacity 0.4s ease, transform 0.4s var(--ease-overshoot)
}
.content-visible .stagger-item {
  opacity:1;
  transform:translateY(0)
}
.content-visible .stagger-item:nth-child(1) {
  transition-delay:0.1s
}
.content-visible .stagger-item:nth-child(2) {
  transition-delay:0.18s
}
.content-visible .stagger-item:nth-child(3) {
  transition-delay:0.25s
}
/* INPUTS & SECTIONS */
.cyber-input {
  width:100%;
  background:rgba(0,0,0,0.3);
  border:1px solid rgba(255,255,255,0.1);
  border-radius:16px;
  padding:16px 50px 16px 18px;
  color:#fff;
  font-family:var(--font-code);
  font-size:0.9rem
}
.activation-wrap {
  display:flex;
  flex-direction:column;
  gap:8px
}
.activation-card {
  background:rgba(0,0,0,0.25);
  border:1px solid rgba(255,255,255,0.04);
  padding:12px;
  border-radius:10px;
  overflow:hidden;
  transition:all 320ms var(--ease-smooth)
}
.activation-pre {
  font-family:var(--font-code);
  white-space:pre-wrap;
  margin:0;
  padding:8px;
  background:rgba(0,0,0,0.12);
  border-radius:8px;
  border:1px dashed rgba(255,255,255,0.03);
  color:#fff;
  font-size:0.75rem
}
.activation-hidden {
  max-height:0;
  opacity:0;
  padding:0 12px;
  pointer-events:none;
  margin-top:0
}
.activation-open {
  max-height:567px;
  opacity:1;
  padding:12px;
  margin-top:4px
}
.activation-toggle {
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:8px 4px;
  cursor:pointer;
  opacity:0.9;
  transition:0.2s
}
.activation-toggle:hover {
  opacity:1
}
.trigger-btn {
  width:100%;
  padding:12px;
  border:1px dashed rgba(255,255,255,0.1);
  border-radius:12px;
  background:rgba(255,255,255,0.02);
  color:rgba(255,255,255,0.5);
  font-size:0.75rem;
  letter-spacing:2px;
  text-transform:uppercase;
  cursor:pointer;
  display:flex;
  justify-content:center;
  align-items:center;
  gap:8px;
  transition:0.2s
}
.trigger-btn:hover {
  background:rgba(255,255,255,0.04);
  color:#fff;
  border-color:rgba(255,255,255,0.3)
}
.mode-btn {
  background:rgba(0,242,255,0.05);
  border-color:rgba(0,242,255,0.2);
  color:var(--neon-cyan)
}
.mode-btn.active-mode {
  background:var(--neon-cyan);
  color:#000;
  box-shadow:0 0 20px rgba(0,242,255,0.4);
  border-color:transparent
}
/* FORM ELEMENTS */
.section-title {
  font-size: 0.7rem;
  font-weight: 700;
  color: rgba(255,255,255,0.4);
  margin-bottom: 4px;
  text-transform: uppercase;
}
.form-grid {
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:8px;
  margin-bottom:8px
}
.form-row {
  display:flex;
  gap:8px
}
.form-row input, .form-grid input {
  width:100%;
  padding:10px 12px;
  border-radius:8px;
  border:1px solid rgba(255,255,255,0.08);
  background:#030406;
  color:#fff;
  font-family:var(--font-code);
  font-size:0.85rem
}
.form-row input:focus, .form-grid input:focus {
  border-color:var(--neon-cyan)
}
select.btn {
  width:100%;
  padding:8px;
  background:rgba(0,0,0,0.4);
  color:#fff;
  border:1px solid rgba(255,255,255,0.1);
  border-radius:6px;
}
/* MODALS & TOASTS */
.toaster-wrap {
  position:fixed;
  right:20px;
  bottom:20px;
  z-index:99999;
  display:flex;
  flex-direction:column;
  gap:8px;
  pointer-events:none
}
.toaster {
  pointer-events:auto;
  background:linear-gradient(180deg,#0b1220,#071018);
  border:1px solid rgba(255,255,255,0.06);
  padding:10px 14px;
  border-radius:10px;
  box-shadow:0 18px 40px rgba(0,0,0,0.6);
  font-family:var(--font-ui);
  font-size:0.95rem;
  opacity:0;
  transform:translateY(8px);
  transition:all 260ms var(--ease-smooth)
}
.toaster.show {
  opacity:1;
  transform:translateY(0)
}
.toaster.error {
  border-color:var(--neon-danger);
  color:var(--neon-danger)
}
.toaster.success {
  border-color:var(--neon-success);
  color:var(--neon-success)
}
.modal-overlay {
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.65);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:99998;
  backdrop-filter:blur(8px)
}
.keys-card {
  width:90%;
  max-width:760px;
  background:linear-gradient(180deg,#071018,#0b1220);
  border:1px solid rgba(255,255,255,0.08);
  padding:20px;
  border-radius:16px;
  color:#fff;
  box-shadow:0 20px 50px rgba(0,0,0,0.8);
  max-height:90vh;
  display:flex;
  flex-direction:column
}
.keys-header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:15px;
  padding-bottom:10px;
  border-bottom:1px solid rgba(255,255,255,0.05)
}
.key-list {
  flex:1;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
  gap:8px;
  padding-right:6px;
  min-height:100px
}
.key-item {
  display:flex;
  align-items:center;
  gap:8px;
  padding:12px;
  border-radius:10px;
  background:rgba(255,255,255,0.02);
  border:1px solid rgba(255,255,255,0.02)
}
.key-item.active-item {
  background:rgba(0, 242, 255, 0.05);
  border-color:rgba(0, 242, 255, 0.2)
}
.small-btn {
  background:rgba(255,255,255,0.03);
  border:1px solid rgba(255,255,255,0.1);
  padding:6px 10px;
  border-radius:8px;
  color:#fff;
  cursor:pointer;
  font-size:0.75rem;
  text-transform:uppercase;
  font-weight:600;
  transition:0.2s
}
.small-btn:hover {
  background:rgba(255,255,255,0.08);
  border-color:rgba(255,255,255,0.2)
}
.small-btn.active-btn {
  background:var(--neon-success);
  color:#000;
  border:none
}
.danger {
  color:var(--neon-danger);
  border-color:rgba(255,42,109,0.3)
}
.vault-icon {
  width:50px;
  height:50px;
  margin:0 auto 15px;
  color:var(--neon-purple);
  background:rgba(189,0,255,0.1);
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center
}
#vaultModal .keys-card {
  max-width:400px;
  text-align:center
}
@media (max-width:600px) {
  .keys-card {
  padding:15px
}
.form-grid {
  grid-template-columns:1fr
}
}